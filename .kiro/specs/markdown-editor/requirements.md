# マークダウンエディタ要件書

**プロジェクト**: マークダウンエディタ  
**作成日**: 2025-09-20  
**ステータス**: ドラフト  
**フェーズ**: Requirements  

## 1. プロジェクト概要

### 1.1 目的
リアルタイムプレビュー機能を持つ２カラムレイアウトのマークダウンエディタを開発し、開発者やライターがマークダウン文書を効率的に作成・確認できる環境を提供する。

### 1.2 ターゲットユーザー
- 技術文書を作成する開発者
- マークダウンでブログ記事を書くライター
- GitHub等でREADMEを作成するプロジェクト管理者

### 1.3 利用シーン
- 技術ドキュメントの作成・編集
- ブログ記事の下書き作成
- README作成時のプレビュー確認
- マークダウン記法の学習・練習

## 2. 機能要件

### 2.1 コア機能

#### FR-001: ２カラムレイアウト
- **優先度**: 必須
- **説明**: 画面を左右に分割し、左側に入力欄、右側にプレビューを配置
- **受入基準**:
  - [ ] 画面が左右２つのカラムに分割されている
  - [ ] 左側カラムにテキストエリアが配置されている
  - [ ] 右側カラムにプレビューエリアが配置されている
  - [ ] カラムサイズの比率は50:50または調整可能

#### FR-002: マークダウン入力機能
- **優先度**: 必須
- **説明**: 左側エリアでマークダウンテキストを入力可能
- **受入基準**:
  - [ ] テキストエリアにマークダウンテキストを入力できる
  - [ ] 複数行の入力に対応している
  - [ ] 10,000文字程度の大きなドキュメントでも快適に入力できる
  - [ ] Tab文字の入力が可能

#### FR-003: リアルタイムプレビュー
- **優先度**: 必須
- **説明**: 入力されたマークダウンをリアルタイムでHTMLに変換して表示
- **受入基準**:
  - [ ] 入力内容の変更が即座にプレビューに反映される
  - [ ] マークダウン→HTML変換が正しく行われる
  - [ ] プレビューエリアでHTMLが適切にレンダリングされる
  - [ ] レンダリング遅延が100ms以下

#### FR-004: GitHub Flavored Markdown対応
- **優先度**: 必須
- **説明**: 基本的なマークダウン記法に加えGFMをサポート
- **受入基準**:
  - [ ] 見出し（#, ##, ###, ####, #####, ######）
  - [ ] 段落とテキスト
  - [ ] リスト（順序なし・順序あり・ネスト）
  - [ ] リンク（インライン・参照）
  - [ ] 画像（インライン・参照）
  - [ ] 強調（**bold**, *italic*, ~~strikethrough~~）
  - [ ] インラインコード（`code`）
  - [ ] コードブロック（```）
  - [ ] 引用（>）
  - [ ] テーブル
  - [ ] 水平線（---）

### 2.2 UI/UX要件

#### FR-005: レスポンシブデザイン
- **優先度**: 高
- **説明**: デスクトップ、タブレット、モバイルに対応
- **受入基準**:
  - [ ] デスクトップ（1200px以上）で２カラムレイアウト
  - [ ] タブレット（768px〜1199px）で２カラムレイアウト
  - [ ] モバイル（767px以下）で単一カラム（入力・プレビュー切り替え）
  - [ ] 各デバイスで適切にコンテンツが表示される

#### FR-006: アクセシビリティ
- **優先度**: 中
- **説明**: キーボード操作とスクリーンリーダー対応
- **受入基準**:
  - [ ] Tab/Shift+Tabでフォーカス移動が可能
  - [ ] Enter/Spaceでボタン操作が可能
  - [ ] 適切なARIAラベルが設定されている
  - [ ] コントラスト比がWCAG 2.1 AA基準を満たす

### 2.3 拡張機能（オプション）

#### FR-007: シンタックスハイライト
- **優先度**: 低
- **説明**: 入力エリアでマークダウン記法をハイライト表示
- **受入基準**:
  - [ ] 見出しが色分けされている
  - [ ] コードブロックが識別可能
  - [ ] リンクが識別可能
  - [ ] 強調テキストが識別可能

#### FR-008: スクロール同期
- **優先度**: 低
- **説明**: 入力エリアとプレビューエリアのスクロール位置を同期
- **受入基準**:
  - [ ] 入力エリアのスクロールでプレビューも連動
  - [ ] プレビューエリアのスクロールで入力エリアも連動
  - [ ] スクロール同期の有効/無効を切り替え可能

#### FR-009: コードブロックシンタックスハイライト
- **優先度**: 中
- **説明**: プレビューでコードブロックをシンタックスハイライト
- **受入基準**:
  - [ ] JavaScript、TypeScript、Python、Java、C++等の主要言語に対応
  - [ ] 言語指定に基づく適切なハイライト
  - [ ] コードブロックのテーマ設定可能

## 3. 非機能要件

### 3.1 パフォーマンス要件

#### NFR-001: レスポンス時間
- マークダウン変換処理: 100ms以下
- 初期ページロード: 2秒以下
- 大きなドキュメント（10,000文字）での快適な動作

#### NFR-002: リソース使用量
- メモリ使用量: 100MB以下
- CPUリソース: 常時使用率30%以下

### 3.2 互換性要件

#### NFR-003: ブラウザ対応
- Chrome 100以降
- Firefox 100以降  
- Safari 15以降
- Edge 100以降

#### NFR-004: デバイス対応
- デスクトップ（Windows、macOS、Linux）
- タブレット（iPad、Android）
- スマートフォン（iOS、Android）

### 3.3 信頼性要件

#### NFR-005: 可用性
- アプリケーションクラッシュ頻度: 0.1%以下
- エラー処理の適切な実装

## 4. 制約事項

### 4.1 技術制約
- **フレームワーク**: Next.js 15.3.3（App Router必須）
- **言語**: TypeScript（JavaScript不可）
- **パッケージマネージャー**: pnpm
- **テスティング**: Vitest
- **Linter**: Biome

### 4.2 機能制約
- データ永続化機能なし（セッション終了時にデータ消失）
- ユーザー認証機能なし
- ファイルアップロード機能なし
- 印刷機能なし（初期実装では）
- サーバーサイド機能最小限（静的生成優先）

### 4.3 リソース制約
- 外部API依存なし
- 外部CDN依存最小限
- バンドルサイズ: 1MB以下

## 5. データ要件

### 5.1 データ形式
- **入力**: プレーンテキスト（マークダウン記法）
- **出力**: HTML
- **文字コード**: UTF-8
- **改行コード**: LF（\n）

### 5.2 データ制限
- 最大文字数: 50,000文字
- 最大行数: 10,000行
- ファイルサイズ制限なし（メモリ上での処理のみ）

## 6. セキュリティ要件

### 6.1 XSS対策
- マークダウン→HTML変換時のサニタイゼーション
- HTMLタグのエスケープ処理
- スクリプトタグの無効化

### 6.2 その他セキュリティ
- CSP（Content Security Policy）の設定
- HTTPSでの配信（本番環境）

## 7. 品質要件

### 7.1 テスト要件
- ユニットテスト: カバレッジ80%以上
- インテグレーションテスト: 主要機能の動作確認
- E2Eテスト: ユーザージャーニーの確認

### 7.2 コード品質
- TypeScriptエラー: 0件
- Lintエラー: 0件
- コード重複度: 5%以下

## 8. 運用要件

### 8.1 デプロイメント
- 静的サイト生成（SSG）での配信
- Vercel等のJamstackプラットフォーム対応
- ビルド時間: 3分以内

### 8.2 モニタリング
- エラー監視（開発環境のみ）
- パフォーマンス監視（開発環境のみ）

## 9. 受入テスト基準

### 9.1 機能テスト
- [ ] ルートパス（/）でエディタが表示される
- [ ] マークダウンテキストを入力できる
- [ ] 入力内容がリアルタイムでプレビューされる
- [ ] 基本的なマークダウン記法が正しく変換される
- [ ] レスポンシブデザインが機能している

### 9.2 非機能テスト
- [ ] 各対応ブラウザで正常動作する
- [ ] 10,000文字のドキュメントでも快適に動作する
- [ ] ページロード時間が2秒以内
- [ ] TypeScript/Lintエラーがない

### 9.3 ユーザビリティテスト
- [ ] 初回訪問者が使い方を理解できる
- [ ] キーボードのみで主要機能を操作できる
- [ ] モバイルデバイスで適切に操作できる

## 10. 除外項目

以下の機能は今回の実装対象外とする：

- ユーザー登録/ログイン機能
- ファイル保存/読み込み機能
- ドキュメント履歴管理
- 複数ファイル管理
- 協力編集機能
- プラグイン機能
- テーマ変更機能（初期実装では）
- エクスポート機能（PDF、Word等）
- 印刷機能

---

**承認フロー**:
- [ ] 要件レビュー完了
- [ ] ステークホルダー承認
- [ ] 設計フェーズへ移行承認

**次のフェーズ**: 設計書（design.md）の作成